<div class="ngx-datatable-wrapper" >
	<ngx-datatable #table
				   class="material expandable"
				   [class.scrollable]="isScrollable"
				   [rows]="tableRows"
				   [columnMode]="columnMode.force"
				   [headerHeight]="50"
				   [loadingIndicator]="isTableLoading"
				   [footerHeight]="50"
				   rowHeight="auto"
				   [selected]="tableSelectedRows"
				   [selectionType]="selectionType.checkbox"
				   [limit]="currentPageLimit"
				   (activate)="onActivated($event)"
				   [externalSorting]="tableSettings.isServerSideRendering"
				   [externalPaging]="tableSettings.isServerSideRendering"
				   [count]="totalElementsNumber"
				  >

		<!-- checkbox template  -->
		<ngx-datatable-column *ngIf="tableSettings.isSelectable"
							  [width]="50"
							  [sortable]="false"
							  [canAutoResize]="false"
							  [draggable]="false"
							  [resizeable]="false">

			<ng-template ngx-datatable-header-template>
				<div class="checkbox-wrapper">
					<input type="checkbox" [checked]="selectAllCheckboxes[currentPageNumber]" (click)="onSelectAllRowsCheckboxClick()" />
				</div>
			</ng-template>


			<ng-template ngx-datatable-cell-template let-row="row" let-rowIndex="rowIndex">
				<div class="row-checkbox-wrapper">
					<input type="checkbox" [checked]="selectedRowsCheckboxes[rowIndex]" (click)="onSelectRowCheckboxClick(row , rowIndex)" />
				</div>
			</ng-template>
		</ngx-datatable-column>

		

			<!-- columns -->
			<ngx-datatable-column *ngFor="let column of tableSettings.columnSettings" name="{{column.title}}" [sortable]="column.isSortable" [resizeable]="false" prop="{{column.field}}" maxWidth="{{(column && column.width > 0)  ? column.width:'undefined'}}">
				<ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
					<div *ngIf="column.type == columnTypes.text">{{ value | truncate:[50]}}</div>
					<div *ngIf="column.type == columnTypes.date">{{ transformToLocalDate(value) | date : dateFormat.ShortDateTime }}</div>
					<div *ngIf="column.type == columnTypes.image" [title]="row[column.altTextField]">
						<img [src]="value" />
					</div>
				</ng-template>
			</ngx-datatable-column>

			<!-- edit action columns -->
			<ngx-datatable-column *ngIf="tableSettings.allowEdit" maxWidth="40" [resizeable]="false">
				<ng-template let-row="row" ngx-datatable-cell-template>
					<a href="javascript:void(0)" title="Edit" (click)="onEditRowClick(row)"><img src="assets/images/edit.svg" /></a>
				</ng-template>
			</ngx-datatable-column>

			<!-- delete action columns -->
			<ngx-datatable-column *ngIf="tableSettings.allowDelete" maxWidth="60" [resizeable]="false">
				<ng-template let-row="row" ngx-datatable-cell-template>
					<a href="javascript:void(0)" title="Delete" (click)="onDeleteRowClick(row)"><img src="assets/images/delete.svg" /></a>
				</ng-template>
			</ngx-datatable-column>
		<!-- custom footer -->
		<ngx-datatable-footer *ngIf="!isTableLoading">
			<ng-template ngx-datatable-footer-template
						 let-rowCount="rowCount"
						 let-pageSize="pageSize"
						 let-selectedCount="selectedCount"
						 let-curPage="curPage"
						 let-offset="offset"
						 let-isVisible="isVisible">
				<!-- selected rows count -->
				<div class="page-count" *ngIf="tableSettings.isSelectable">
					{{tableSelectedRows.length}} Selected / {{rowCount}} Total
				</div>

				<!-- footer middle container -->
				<div class="footer-middle-container">
					<!-- page size -->
					<div class="footer-page-size-container">
						Show
						<select (change)="handlePageLimitOptionsChange($event.target.value)">
							<option *ngFor="let option of pageLimitOptions"
									[value]="option"
									[selected]="option == currentPageLimit">
								{{ option }}
							</option>
						</select>
						Records
					</div>


					<!-- showing page position and total count -->
					<div class="page-showing-container">
						{{curPage*pageSize - pageSize + 1}}- {{curPage*pageSize}} of  {{rowCount}} Records
					</div>
				</div>

				<datatable-pager [pagerLeftArrowIcon]="'datatable-icon-left'"
								 [pagerRightArrowIcon]="'datatable-icon-right'"
								 [pagerPreviousIcon]="'datatable-icon-prev'"
								 [pagerNextIcon]="'datatable-icon-skip'"
								 [page]="curPage"
								 [size]="pageSize"
								 [count]="rowCount"
								 (click)="onPagerClick()"
								 [hidden]="!((rowCount / pageSize) > 1)"
								 (change)="table.onFooterPage($event)">
				</datatable-pager>
			</ng-template>
		</ngx-datatable-footer>
	</ngx-datatable>
</div>




